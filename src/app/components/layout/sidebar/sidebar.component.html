<div class="w-full flex flex-col h-screen bg-neutral-900 text-white">
  <div class="space-y-2 overflow-y-scroll h-full hide-scrollbar pb-2">
    <header class="mb-0 h-14 flex items-center px-2">
      <p-button
        label="Procure uma conversa"
        icon="pi pi-search"
        [dt]="buttonThemes.ghost"
        fluid
        class="w-full"
        styleClass="text-sm! py-2! w-full! bg-neutral-800! border! border-neutral-700/20! hover:bg-neutral-700/50! transition-colors! text-nowrap! truncate!"
        (click)="handleOpenModal('findRooms')"
      >
      </p-button>
    </header>
    <hr class="border-t border-neutral-700/80" />
    <ul class="flex flex-col gap-y-0.5 px-2">
      <p-button
        label="Amigos"
        [dt]="buttonThemes.ghost"
        fluid
        icon="pi pi-users"
        styleClass="justify-start! transition-none! {{
          endsWithPathname('/friends') && 'bg-neutral-800! text-white!'
        }}"
        routerLink="/friends"
      >
      </p-button>
      <p-button
        label="Atividade"
        [dt]="buttonThemes.ghost"
        fluid
        icon="pi pi-bell"
        [badge]="unreadNotificationCount"
        badgeSeverity="danger"
        styleClass="justify-start! transition-none! {{
          endsWithPathname('/notifications') && 'bg-neutral-800! text-white!'
        }}"
        routerLink="/notifications"
      >
      </p-button>
      <p-button
        label="Configurações"
        [dt]="buttonThemes.ghost"
        fluid
        icon="pi pi-cog"
        styleClass="justify-start! transition-none! {{
          endsWithPathname('/settings') && 'bg-neutral-800! text-white!'
        }}"
        routerLink="/settings"
      >
      </p-button>
    </ul>
    <hr class="border-t border-neutral-700/80" />
    <ul class="flex flex-col gap-y-0.5 px-2">
      @if (isLoading) {
      <p-skeleton
        width="100%"
        height="2.5rem"
        class="rounded-md! bg-neutral-800!"
      />
      } @else if (rooms.length === 0) {
      <div
        class="h-[calc(100vh-20rem)] flex flex-col justify-center items-center p-4 gap-2"
      >
        <i class="pi pi-comment text-neutral-700" style="font-size: 2rem"></i>
        <p class="text-sm text-neutral-500 text-center">
          Nenhuma sala encontrada.<br />Crie ou entre em uma sala!
        </p>
      </div>
      } @for(room of rooms; track room.id) {
      <p-button
        fluid
        styleClass="justify-start! transition-none! {{
          room.id === selectedRoom()?.id && 'bg-neutral-800! text-white!'
        }}"
        routerLink="/chat/{{ room.id }}"
        [dt]="buttonThemes.ghost"
      >
        <p-avatar
          [image]="room.picture ?? '/assets/user-placeholder.png'"
          shape="circle"
          styleClass="min-w-8! [&_img]:object-cover"
        />
        <span class="text-start text-nowrap truncate">{{
          room.display_name
        }}</span>
      </p-button>
      }
    </ul>
  </div>
  <app-user-info (setOpenModal)="handleOpenModal($event)"></app-user-info>
</div>
